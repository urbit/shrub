/@  accel-node
::
^-  firm:neo
::=>
::|%
::::  Put all vase:pail in deps in a vase, along with stdlib
::++  envase-deps
::  |=  =bowl:neo
::  !>  :-  .
::  %~  val  by
::  %-  ~(run by deps.bowl)
::  |=  val=(pair pith cane)
::  q.pail.q
::--
|%
++  state  %accel-node
++  poke  (sy %rely ~)
++  kids  *kids:neo
++  deps
  %-  ~(gas by *deps:neo)
  =/  q 
    :-  req=|  
    :-  [%pail %sig]
    `[%x ~]
  :~  [%a q]  [%b q]  [%c q]
      [%d q]  [%e q]  [%f q]
      [%g q]  [%h q]  [%i q]
  ==
::
++  form
  ^-  form:neo
  |_  [=bowl:neo =ever:neo state-vase=vase *]
  ++  poke
    |=  [=stud:neo vax=vase]
    ^-  (quip card:neo vase)
    ?>  =(%rely stud)
    =+  !<([=term =stem:neo] vax)
    ~&  >  [term stem]
    ~&  >>>  deps.bowl
    ?>  ?=(%x -.q.stem)
    ::=/  sta  !<(accel-node state-vase)
    ::=/  all-deps  (envase-deps bowl)
    ::=/  result  (slap all-deps (ream hoon.sta))
    ::[~ !>([hoon.sta result])]
    [~ state-vase]
  ++  init
    |=  old=(unit vase)
    `(need old)
  --
--
